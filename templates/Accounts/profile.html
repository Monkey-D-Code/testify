{% extends 'Base.html' %}
{% load static %}
{% load widget_tweaks %}
{% block title %}
	<title>{{student.full_name }}  | {{brand.full_name}}</title>
{% endblock %}

{% block react_script %}
    {% if request.user.is_staff %}

    {% else %}
        <script type='text/babel'>
            class Profile extends React.Component{
                state = {
                    student:{},
                    loading:false,
                    baseAjaxUrl: `${location.protocol}//${location.hostname}:${location.port}`,
                }
                componentWillMount = ()=>{
                    const {baseAjaxUrl} = this.state;
                    const username = '{{request.user.username}}';
                    this.setState({loading:true})
                    axios.post(`${baseAjaxUrl}/accounts/student-from-username/`,{username,})
                        .then((response)=>{
                            this.setState({
                                student:response.data,
                                loading:false,
                            })
                        })
                        .catch((response,error)=>{
                            console.log(error);

                            this.setState({loading:false})
                        })
                }
                render=()=>{
                    const {loading,student} = this.state;
                    const {user} = student;
                    if(loading){
                        return(
                            <Loader />
                        )
                    }
                    return(
                        <div>
                            <section class="ftco-section contact-section">
                                <div class="container">
                                    <div class="row d-flex contact-info">
                                    <div class="col-md-3 d-flex">
                                        <div class="bg-light align-self-stretch box p-4 text-center">
                                            <h3 class="mb-4">Address</h3>
                                            <p>{{student.address}}</p>
                                        </div>
                                    </div>
                                    <div class="col-md-3 d-flex">
                                        <div class="bg-light align-self-stretch box p-4 text-center">
                                            <h3 class="mb-4">Contact Number</h3>
                                            <p><a href="tel://{{student.contact_number}}">+ 91 {{student.contact_number}}</a></p>
                                        </div>
                                    </div>
                                    <div class="col-md-3 d-flex">
                                        <div class="bg-light align-self-stretch box p-4 text-center">
                                            <h3 class="mb-4">About</h3>
                                            <p>{{student.about}}</p>
                                        </div>
                                    </div>
                                    <div class="col-md-3 d-flex">
                                        <div class="bg-light align-self-stretch box p-4 text-center">
                                            <h3 class="mb-4">Date Of Birth</h3>
                                            <p><a href="#">{{student.date_of_birth}}</a></p>
                                        </div>
                                    </div>
                                    </div>
                                </div>
                                </section>

                        </div>
                    )
                }
            }
            ReactDOM.render(<Profile/>,document.getElementById('profile'));
        </script>
    {% endif %}
{% endblock %}

{% block content %}
    <style>
        .user-dp{
            margin:1em;
            border-radius:50%;
            height:4em;
            width:4em;
            object-fit:cover;
        }
    </style>
    
    <section class="hero-wrap hero-wrap-2" style="background-image: url({{brand.random_hero_image}});">
      <div class="overlay"></div>
      <div class="container">
        <div class="row no-gutters slider-text align-items-center justify-content-center">
          <div class="col-md-9 ftco-animate text-center">
            <h1 class="mb-2 bread"><img src='{% if student.display_image_url == "" %}{% else %}https://ui-avatars.com/api/?name={{request.user.first_name}}+{{request.user.last_name}}&size=400&background=EC7357&color=E1CE7A{% endif %}' class='user-dp' />{{student.full_name}}</h1>
            <p class="breadcrumbs"><span class="mr-2"><a href="{% url 'Website:home' %}">Home <i class="ion-ios-arrow-forward"></i></a></span> <span>{{student.full_name}} <i class="ion-ios-arrow-forward"></i></span></p>
          </div>
        </div>
      </div>
    </section>
    <section class="hero-wrap hero-wrap-2" id='profile'></section>

    
		
		
{% endblock %}